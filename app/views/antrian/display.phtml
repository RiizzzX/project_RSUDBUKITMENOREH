<?php
/* ANTRIAN DISPLAY VIEW - Modern Design */
?>

<div class="antrian-container">
    <!-- LEFT SIDE - ANTRIAN SECTION -->
    <div class="farmasi-section">
        <div class="farmasi-card">
            <div class="farmasi-header">ANTRIAN PENDAFTARAN</div>
            <div class="farmasi-title">Nomor Saat Ini</div>
            
            <div class="antrian-number-display">
                <div class="antrian-number" id="currentNumber">A-012</div>
            </div>
            
            <div class="farmasi-footer">Silakan menuju loket pendaftaran</div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-number">5</div>
                <div class="stat-label">Menunggu</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìã</div>
                <div class="stat-number">12</div>
                <div class="stat-label">Total Hari Ini</div>
            </div>
        </div>
        
        <!-- RUNNING TEXT -->
        <div class="running-text-container">
            <div class="running-text">
                <span>üè• Selamat datang di RSUD Bukit Menoreh ‚Ä¢ Mohon menunggu nomor antrian Anda dipanggil ‚Ä¢ Terima kasih atas kesabaran Anda ‚Ä¢ Kami siap melayani dengan sepenuh hati üè•</span>
            </div>
        </div>
    </div>
    
    <!-- RIGHT SIDE - ANTRIAN LIST -->
    <div class="antrian-list-section">
        <div class="antrian-list-header">
            <h2>Daftar Antrian Pendaftaran</h2>
            <div class="antrian-count">Sisa Antrian: 5</div>
        </div>
        
        <div class="antrian-list" id="queueList">
            <div class="antrian-item">
                <div class="antrian-item-number">A-008</div>
                <div class="antrian-item-info">
                    <div class="antrian-item-name">Rini Kusuma</div>
                    <div class="antrian-item-time">10:45</div>
                    <div class="antrian-item-medicines">Pendaftaran Baru</div>
                </div>
                <div class="antrian-item-status">
                    <button class="status-btn status-completed">Selesai</button>
                </div>
            </div>
            
            <div class="antrian-item">
                <div class="antrian-item-number">A-009</div>
                <div class="antrian-item-info">
                    <div class="antrian-item-name">Bambang Sugito</div>
                    <div class="antrian-item-time">10:50</div>
                    <div class="antrian-item-medicines">Pemeriksaan Ulang</div>
                </div>
                <div class="antrian-item-status">
                    <button class="status-btn status-completed">Selesai</button>
                </div>
            </div>
            
            <div class="antrian-item">
                <div class="antrian-item-number">A-010</div>
                <div class="antrian-item-info">
                    <div class="antrian-item-name">Sinta Rahma</div>
                    <div class="antrian-item-time">11:00</div>
                    <div class="antrian-item-medicines">Pendaftaran Baru</div>
                </div>
                <div class="antrian-item-status">
                    <button class="status-btn status-completed">Selesai</button>
                </div>
            </div>
            
            <div class="antrian-item">
                <div class="antrian-item-number">A-011</div>
                <div class="antrian-item-info">
                    <div class="antrian-item-name">Hendra Wijaya</div>
                    <div class="antrian-item-time">11:10</div>
                    <div class="antrian-item-medicines">Pendaftaran Baru</div>
                </div>
                <div class="antrian-item-status">
                    <button class="status-btn status-ready">Sedang Diproses</button>
                </div>
            </div>
            
            <div class="antrian-item">
                <div class="antrian-item-number">A-012</div>
                <div class="antrian-item-info">
                    <div class="antrian-item-name">Endang Sudaryani</div>
                    <div class="antrian-item-time">11:15</div>
                    <div class="antrian-item-medicines">Pendaftaran Baru</div>
                </div>
                <div class="antrian-item-status">
                    <button class="status-btn status-waiting">Menunggu</button>
                </div>
            </div>
        </div>
        
        <div class="antrian-footer-message">
            Harap menunggu nomor antrian Anda dipanggil!
        </div>
    </div>
</div>

<script>
    // Auto-update nomor antrian setiap beberapa detik (simulasi)
    let queueNumbers = ['A-008', 'A-009', 'A-010', 'A-011', 'A-012'];
    let currentIndex = 0;
    
    // ===== AUTO SCROLL SMOOTH HANYA KEBAWAH TERUS-MENERUS =====
    function autoScrollQueue() {
        const queueList = document.getElementById('queueList');
        if (!queueList) return;
        
        // Disable manual scroll
        queueList.addEventListener('wheel', (e) => e.preventDefault(), { passive: false });
        queueList.addEventListener('touchmove', (e) => e.preventDefault(), { passive: false });
        
        // Buat wrapper untuk smooth scroll
        const items = queueList.innerHTML;
        queueList.innerHTML = '<div class="scroll-content" id="scrollContent">' + items + '</div>';
        
        const scrollContent = document.getElementById('scrollContent');
        scrollContent.style.transition = 'transform 0.05s linear';
        
        let scrollPos = 0;
        const scrollSpeed = 1.5; // pixel per frame (dipercepat)
        let isPaused = false;
        
        function scroll() {
            if (isPaused) {
                requestAnimationFrame(scroll);
                return;
            }
            
            const maxScroll = scrollContent.offsetHeight - queueList.offsetHeight;
            
            if (maxScroll <= 0) {
                requestAnimationFrame(scroll);
                return;
            }
            
            scrollPos += scrollSpeed;
            
            // Jika sudah di bawah, langsung reset ke awal
            if (scrollPos >= maxScroll) {
                scrollPos = 0;
                scrollContent.style.transition = 'none'; // instant reset
                scrollContent.style.transform = 'translateY(0)';
                
                // Tunggu sebentar baru mulai lagi dengan smooth transition
                setTimeout(() => {
                    scrollContent.style.transition = 'transform 0.05s linear';
                }, 50);
            }
            
            scrollContent.style.transform = 'translateY(-' + scrollPos + 'px)';
            requestAnimationFrame(scroll);
        }
        
        requestAnimationFrame(scroll);
    }
    
    // Start auto scroll when page loads
    document.addEventListener('DOMContentLoaded', autoScrollQueue);
    
    // Uncomment untuk auto-rotate nomor antrian
    // setInterval(() => {
    //     currentIndex = (currentIndex + 1) % queueNumbers.length;
    //     document.querySelector('#currentNumber').textContent = queueNumbers[currentIndex];
    // }, 10000);
</script>
